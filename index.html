<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>EVANGELION Sim -2025 Standard-</title>

<!-- =========================
     STYLE
========================= -->
<style>
@import url('https://fonts.googleapis.com/css2?family=Shippori+Mincho+B1:wght@800&display=swap');

/* ---------- 基本 ---------- */
body {
    background:#000;
    color:#fff;
    margin:0;
    font-family:sans-serif;
    display:flex;
    flex-direction:column;
    align-items:center;
    min-height:100vh;
}
header {
    width:100%;
    height:50px;
    background:#111;
    border-bottom:2px solid #8a2be2;
    display:flex;
    align-items:center;
    gap:8px;
    padding:0 10px;
    box-sizing:border-box;
    position:sticky;
    top:0;
    z-index:100;
}
.header-btn {
    background:#333;
    color:#ccc;
    border:1px solid #555;
    padding:5px 8px;
    font-size:0.7rem;
    border-radius:4px;
    cursor:pointer;
}
.btn-graph {
    background:#8a2be2;
    color:#fff;
}
.max-hamari-display {
    background:#000;
    color:#ff4444;
    border:1px solid #ff4444;
    padding:4px 8px;
    font-size:0.75rem;
    border-radius:4px;
    font-weight:bold;
}

/* ---------- メイン ---------- */
.main-content {
    width:100%;
    max-width:440px;
    padding:10px;
    box-sizing:border-box;
}
.machine {
    background:#111;
    border:3px solid #8a2be2;
    border-radius:15px;
    padding:12px;
}

/* ---------- 画面 ---------- */
.screen {
    background:#000;
    height:300px;
    border:2px solid #444;
    border-radius:10px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    position:relative;
    overflow:hidden;
}
.digit-container {
    display:flex;
    gap:5px;
}
.digit {
    font-size:8.5rem;
    font-weight:900;
    width:110px;
    text-align:center;
    font-family:'Shippori Mincho B1', serif;
}
.odd { color:#ff4444; text-shadow:0 0 20px #ff4444; }
.even { color:#4444ff; text-shadow:0 0 20px #4444ff; }
.gold { color:#ffeb3b; text-shadow:0 0 30px #ffeb3b; }

.mode-display {
    position:absolute;
    bottom:35px;
    right:15px;
    font-size:0.9rem;
    color:#8a2be2;
    font-weight:bold;
}

/* ---------- 保留 ---------- */
.heso-overlay {
    position:absolute;
    bottom:10px;
    display:flex;
    gap:10px;
}
.heso-overlay.right-mode {
    right:10px;
    bottom:80px;
    flex-direction:column-reverse;
}

/* 通常時：● */
.heso-ball {
    width:18px;
    height:18px;
    background:#222;
    border:1px solid #555;
    border-radius:50%;
}

/* ST・時短中：■ */
.heso-overlay.right-mode .heso-ball {
    border-radius:3px;
}

/* 色 */
.heso-on { background:#888; }
.heso-red {
    background:radial-gradient(circle,#ff4444,#880000);
    box-shadow:0 0 8px #ff0000;
}
.heso-green {
    background:radial-gradient(circle,#44ff44,#008800);
    box-shadow:0 0 8px #00ff00;
}
.heso-blue {
    background:radial-gradient(circle,#4444ff,#000088);
    box-shadow:0 0 8px #0000ff;
}
.heso-blink { animation:blink 0.3s infinite; }
@keyframes blink { 50%{opacity:.3;} }

/* ---------- ボタン ---------- */
.control-panel {
    display:flex;
    gap:8px;
    margin-top:12px;
}
.btn-auto {
    flex:1;
    background:#8a2be2;
    border:1px solid #a450ff;
    color:#fff;
    font-weight:bold;
    border-radius:6px;
}
.btn-stop {
    background:#444!important;
}

/* ---------- ログ ---------- */
.log {
    margin-top:10px;
    height:350px;
    background:#000;
    border:1px solid #333;
    padding:10px;
    font-family:monospace;
    overflow-y:auto;
}

/* ---------- エフェクト ---------- */
.hidden-lamp {
    position:absolute;
    top:12px;
    right:20px;
    width:15px;
    height:15px;
    border-radius:50%;
    background:#222;
}
.lamp-active {
    animation:rainbow 0.3s infinite;
}
@keyframes rainbow {
    0%{background:red;}50%{background:yellow;}100%{background:cyan;}
}
</style>
</head>

<body>

<header>
    <button class="header-btn">機種選択</button>
    <button class="header-btn btn-graph">データグラフ</button>
    <button class="header-btn" onclick="location.reload()">リセット</button>
    <div id="max-hamari-box" class="max-hamari-display">最大ハマリ: 0</div>
</header>

<div class="main-content">
<div class="machine" id="machine">
    <div id="lamp" class="hidden-lamp"></div>

    <div class="screen">
        <div class="digit-container">
            <div id="d1" class="digit odd">1</div>
            <div id="d2" class="digit odd">2</div>
            <div id="d3" class="digit odd">3</div>
        </div>

        <div id="sub-display" class="mode-display">通常:0</div>

        <!-- 保留 -->
        <div id="heso-area" class="heso-overlay">
            <div id="h0" class="heso-ball"></div>
            <div id="h1" class="heso-ball"></div>
            <div id="h2" class="heso-ball"></div>
            <div id="h3" class="heso-ball"></div>
            <div id="h4" class="heso-ball"></div>
        </div>
    </div>

    <div class="control-panel">
        <button id="btn-slow" class="btn-auto" onclick="toggleAuto('slow')">低速オート</button>
        <button id="btn-fast" class="btn-auto" onclick="toggleAuto('fast')">高速オート</button>
    </div>
</div>

<div id="log" class="log">> システム起動完了</div>
</div>

<!-- =========================
     SCRIPT
========================= -->
<script>
/* ---- 基本状態 ---- */
const SPECS = { n:319.7, s:99.4, st:163, jt:100 };
let mode = '通常';
let isAuto = false;
let autoSpeed = 'slow';
let currentRot = 0;
let totalRot = 0;
let maxHamari = 0;

/* ---- UI ---- */
function updateUI(){
    document.getElementById('sub-display').innerText =
        mode === '通常' ? `通常:${currentRot}` : `${mode}`;
}

/* ---- 保留UI ---- */
function updateHesoUI(){
    const heso = document.getElementById('heso-area');
    mode !== '通常'
        ? heso.classList.add('right-mode')
        : heso.classList.remove('right-mode');

    for(let i=0;i<5;i++){
        const el = document.getElementById('h'+i);
        el.className = 'heso-ball heso-on';
    }
}

/* ---- 回転処理（簡略） ---- */
function spin(){
    currentRot++;
    totalRot++;
    if(currentRot > maxHamari){
        maxHamari = currentRot;
        document.getElementById('max-hamari-box').innerText =
            `最大ハマリ: ${maxHamari}`;
    }
    updateUI();
}

/* ---- オート ---- */
function toggleAuto(speed){
    isAuto = !isAuto;
    autoSpeed = speed;
    if(isAuto) autoLoop();
}
function autoLoop(){
    if(!isAuto) return;
    spin();
    setTimeout(autoLoop, autoSpeed==='fast'?100:400);
}

/* ---- 初期 ---- */
updateUI();
updateHesoUI();
</script>

</body>
</html>
